var blob = {
    "countries": [
        {
            "mcc": "269", 
            "name": "Rangiroa", 
            "prices": [
                {
                    "amount": "0.0000", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobileviewpt"
                        }, 
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobiletrendpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }, 
                {
                    "amount": "2.1000", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobiletrendpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }
            ]
        },
        {
            "mcc": "268", 
            "name": "Portugal", 
            "prices": [
                {
                    "amount": "0.0000", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobileviewpt"
                        }, 
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MT"
                                        }, 
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MT"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobiletrendpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }, 
                {
                    "amount": "2.1000", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68636", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobiletrendpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }, 
                {
                    "amount": "2.4600", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68999", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobileviewpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }, 
                {
                    "amount": "3.0000", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68637", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobiletrendpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }, 
                {
                    "amount": "4.0000", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68638", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobiletrendpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }, 
                {
                    "amount": "6.1500", 
                    "connectivities": [
                        {
                            "credit_providers": [
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "06", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/TMN", 
                                    "routes": [
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "01", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Vodafone", 
                                    "routes": [
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }, 
                                {
                                    "daily_spending_limit": 50, 
                                    "mnc": "03", 
                                    "monthly_spending_limit": 300, 
                                    "rid": "mop/PT/Optimus", 
                                    "routes": [
                                        {
                                            "lane": "68985", 
                                            "type_of_billing": "MO"
                                        }
                                    ]
                                }
                            ], 
                            "rid": "Mobileviewpt"
                        }
                    ], 
                    "currency": "EUR", 
                    "type": "point"
                }
            ], 
            "rid": "PT"
        }
    ]
}

var navigationApp = angular.module('navigationSandbox', []);

navigationApp.controller('template3Controller', function($scope){
    $scope.currentCountry = null; // to be chosen in the select
    $scope.countries = blob.countries;
    $scope.expand = function(countryData) {
      // TODO: this function must invoke the chosenCountry directive!!!
      // passing countryData to its scope
      alert(countryData.mcc)
    };
    
  })
  .directive('myCountry', function(/* no globals to use */){
    return { // link function paints the country widget (name + mcc + prices select)
    /*  link: function(scope, elem, attrs) { // attrs = {myCountry:'countryData'}
        alert(attrs.myCountry)
      }*/
    }
  })
  .directive('myPrice', function(){
    return { }
  })

/*
directivesApp.controller('docsRestrictDirectiveController', function($scope){
    $scope.customer = {
      name: 'Naomi',
      address: 'casa sua nel tag'
    }
  })
  .directive('myCustomerTag', function(){
    return { 
      restrict: 'E',
      templateUrl: 'html/my-customer.html'
    }
  })

directivesApp.controller('docsIsolateScopeDirectiveController', function($scope){
    $scope.naomi = { name: 'Naomi', address: 'casa sua nella var' };
    $scope.igor = { name: 'Igor', address: 'casa mia nella var' };
  })
  .directive('myCustomerTagWithInfo', function(){
    return { 
      restrict: 'E',
      scope: {
        customer: '=instance'
      },
      templateUrl: 'html/my-customer.html'
    }
  })
  
directivesApp.controller('docsTimeDirectiveController', function($scope){
    $scope.myDateFormat = 'MM/dd/yy hh:mm:ss Z';
  })
  // we will use the $interval service to call a handler on a regular basis
  // dateFilter is a custom Angular functions (blaaahhh.....)
  .directive('myCurrentTime', function($interval, dateFilter){
//    /* directives that want to modify the DOM typically use the link option. 
       link takes a function with the following signature:
       function link($scope, element, attrs) { ... }
       - element is the jqLite-wrapped element that 
       this directive 'myCurrentTime' matches
       - attrs = {myCurrentTime:'myDateFormat'}
/*
   
   function link($scope, element, attrs){
      var _format, timeoutId
      ;

      function updateTime(){
        element.text(dateFilter(new Date, _format));
      }

      $scope.$watch(attrs.myCurrentTime, function(value){
        _format = value;
        updateTime();
      });

      element.on('$destroy', function(){
        $interval.cancel(timeoutId);
      });

      // start UI update process; save timeoutId for canceling
      timeoutId = $interval(function(){
        updateTime(); // update DOM
      }, 1000);
    }

    return {
      link: link
    }
  });

directivesApp.controller('docsTransclusionDirectiveController', function($scope){
    $scope.name = 'Igor';
  })
  .directive('myDialog', function(){
    return { 
      restrict: 'E',
      transclude: true,
      templateUrl: 'html/my-dialog.html'
    }
  })
  
directivesApp.controller('docsIsoFnBindExampleController', function($scope, $timeout){
    $scope.name = 'Luciano';
    $scope.hideDialog = function(){
      $scope.dialogIsHidden = true;
      $timeout(function(){
        $scope.dialogIsHidden = false;
      }, 2000);
    }
  })
  .directive('myDialogWithButtons', function(){
    return { 
      restrict: 'E',
      transclude: true,
      scope: {
        'close': '&onClose'
      },
      templateUrl: 'html/my-dialog-close.html'
    }
  })
  */
